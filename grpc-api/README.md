# Inventory Management gRPC API

## Описание

Сервис управления складскими остатками (Inventory Management) на gRPC. Позволяет добавлять, получать, изменять и удалять товары, а также получать оповещения о низком остатке через серверный стриминг.

**Сценарии использования:**
- Учёт продукции на складе
- Оповещения при низком остатке

## Структура
- `proto/inventory.proto` — описание gRPC API
- `server/` — серверная реализация (Python)
- `client/` — клиентские примеры (Python)

## Установка и запуск

1. **Клонируйте репозиторий и перейдите в папку:**
   ```bash
   cd grpc-api
   ```
2. **Создайте и активируйте виртуальное окружение:**
   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   ```
3. **Установите зависимости:**
   ```bash
   pip install -r requirements.txt
   ```
4. **Сгенерируйте Python-код из proto (если потребуется):**
   ```bash
   python3 -m grpc_tools.protoc -I./proto --python_out=./server --grpc_python_out=./server ./proto/inventory.proto
   ```
5. **Запустите сервер:**
   ```bash
   python server/server.py
   ```
6. **В другой консоли запустите клиент:**
   ```bash
   python client/client.py
   ```

## Примеры запросов и ответов

- **AddProduct** — добавление товара:
  ```
  Товар: id=..., название=Тестовый товар, кол-во=10
  ```
- **GetProduct** — получение товара:
  ```
  Товар: id=..., название=Тестовый товар, кол-во=10
  ```
- **UpdateStock** — изменение остатка:
  ```
  Товар: id=..., название=Тестовый товар, кол-во=3
  Изменение запаса: разница=-7, метка времени=...
  ```
- **ListProducts** — список товаров:
  ```
  Товар: id=..., название=Тестовый товар, кол-во=3
  ...
  ```
- **StreamStockAlerts** — оповещения о низком остатке:
  ```
  [ОПОВЕЩЕНИЕ] Низкий запас: Тестовый товар (кол-во=3)
  ```
- **RemoveProduct** — удаление товара:
  ```
  Удаление успешно: True
  ```

## Бонус
- Данные сохраняются в файл `products.json` (расширенная персистентность)
- Серверный стриминг оповещений реализован